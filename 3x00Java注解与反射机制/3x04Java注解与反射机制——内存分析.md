# 一、类的加载过程

1. 当程序主动使用某个类时，若该类还未被加载到内存中，则系统会通过如下三个步骤来对该类进行初始化
   
   - 类的加载（Load）。将类的class文件读入内存，并为之创建一个java.lang.Class对象。此过程由类加载器完成
   
   - 类的链接（Link）。将类的二进制数据合并到JRE中
   
   - 类的初始化（Initialize）。JVM负责对类进行初始化

# 二、类的加载与ClassLoader的理解

1. 加载。将class文件字节码内容加载到内存中，并将这些静态数据转换成方法区的运行时数据结构，然后生成一个代表这个类的java.lang.Class对象

2. 链接：将Java类的二进制代码合并到JVM的运行状态之中的过程
   
   - 验证：确保加载的类信息复合JVM规范，没有安全方面的问题
   
   - 准备：正式为类变量（static）分配内存并设置类变量默认初始值的阶段，这些内存都将在方法区进行分配
   
   - 解析：虚拟机常量池内的符号引用（常量名）替换为直接引用（地址）的过程

3. 初始化
   
   - 执行类构造器`<clinit>()`方法的过程。类构造器`<clinit>()`方法是由编译器自动收集类中所有变量的赋值动作和静态代码块中的语句合并产生的。（类构造器是构造类信息的，不是构造该类对象的构造器）
   
   - 当初始化一个类的时候，如果发现其父类还没有进行初始化，则需要先触发其父类的初始化
   
   - 虚拟机会保证一个类的`<clinit>()`方法在多线程环境中被正确加锁和同步
